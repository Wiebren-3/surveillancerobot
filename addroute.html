<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Add Route</title>
	<style>
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
			font-family: 'Abadi MT', sans-serif;
			font-size: 16px;
			color: #444;
		}

		#map {
			height: 70%;
			width: 100%;
		}

		#button-container {
			padding: 10px;
			background-color: #ddd;
			text-align: center;
		}

		#reset-btn, #export-btn {
			display: inline-block;
			padding: 10px;
			border-radius: 5px;
			background-color: #4CAF50;
			color: white;
			text-align: center;
			text-decoration: none;
			font-size: 20px;
			margin: 5px;
			cursor: pointer;
			box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.5);
		}

		#export-btn:hover {
			background-color: #3e8e41;
		}

		#reset-btn:hover {
			background-color: #f44336;
		}
	</style>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" />

	<script>
		var map;
		var markers = [];

		function initMap() {
			map = L.map('map').setView([52.37, 4.90], 13);
			L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
				maxZoom: 18,
			}).addTo(map);
			map.on('click', addMarker);
		}

		function addMarker(e) {
			var markerNumber = markers.length + 1;
			var marker = L.marker(e.latlng, {
				draggable: true,
				title: "Marker " + markerNumber
			}).addTo(map);

			marker.on('dragend', updateMarkers);

			markers.push(marker);

			updateMarkers();
		}

		function updateMarkers() {
			var coords = "";
			for (var i = 0; i < markers.length; i++) {
				var latlng = markers[i].getLatLng();
				coords += latlng.lat + ", " + latlng.lng + "\n";
			}
			$('#coords').val(coords);
		}

		function resetMarkers() {
			for (var i = 0; i < markers.length; i++) {
				map.removeLayer(markers[i]);
			}
			markers = [];
			updateMarkers();
		}

		function exportMarkers() {
			var xml = '<markers>\n';
			for (var i = 0; i < markers.length; i++) {
				var latlng = markers[i].getLatLng();
				xml += '\t<marker>\n';
				xml += '\t\t<number>' + (i+1) + '</number>\n';
				xml
    </div>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>
</html>
